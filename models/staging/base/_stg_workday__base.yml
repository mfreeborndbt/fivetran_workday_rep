version: 2

models:
  - name: stg_workday__worker_base
    description: >
      Base staging model for worker history data. This layer handles data sourcing using 
      fivetran_utils.union_data to support multi-source scenarios (e.g., multiple Workday 
      instances for different regions). If only one source is configured, it simply selects 
      from that source. The model adds a source_relation column to track data lineage when 
      multiple sources are unioned. No transformations are applied at this layer.
    columns:
      - name: id
        description: Unique identifier for the worker record.
        tests:
          - unique
          - not_null

  - name: stg_workday__worker_position_base
    description: >
      Base staging model for worker position history data. Uses fivetran_utils.union_data 
      to union multiple Workday sources if configured. This layer provides raw position 
      assignment data with source tracking via source_relation. No column renaming or 
      filtering is performed here.
    columns:
      - name: position_id
        description: Unique identifier for the position.
        tests:
          - not_null
      - name: worker_id
        description: Foreign key to the worker.
        tests:
          - not_null
    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - position_id
              - worker_id

  - name: stg_workday__personal_information_common_data_base
    description: >
      Base staging model for common personal information. Uses fivetran_utils.union_data 
      to support multiple Workday instances. Contains raw nationality, birth information, 
      and citizenship details before any column standardization or filtering.
    columns:
      - name: fivetran_id
        description: Fivetran composite key identifier.
        tests:
          - unique
          - not_null

  - name: stg_workday__country_personal_information_base
    description: >
      Base staging model for country-specific personal information. Handles multi-source 
      union via fivetran_utils.union_data. Contains raw gender, marital status, and 
      country-specific fields without transformation.
    columns:
      - name: fivetran_id
        description: Fivetran composite key identifier.
        tests:
          - unique
          - not_null

  - name: stg_workday__person_name_base
    description: >
      Base staging model for person name data. Uses fivetran_utils.union_data for 
      multi-source support. Contains raw first name, last name, and name type components 
      before standardization in the staging layer.
    columns:
      - name: personal_info_system_id
        description: The worker ID this name belongs to.
        tests:
          - not_null
      - name: index
        description: Index for multiple name records per person.
      - name: type
        description: The type of name (preferred, legal, etc.).
    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - personal_info_system_id
              - index
              - type

  - name: stg_workday__person_contact_email_address_base
    description: >
      Base staging model for person contact email addresses. Handles multi-source union 
      using fivetran_utils.union_data. Contains raw work and personal email addresses 
      before column renaming and filtering.
    columns:
      - name: id
        description: Unique identifier for the email record.
        tests:
          - unique
          - not_null

  - name: stg_workday__personal_information_ethnicity_base
    description: >
      Base staging model for personal ethnicity information. Uses fivetran_utils.union_data 
      for multi-source scenarios. Contains raw ethnicity codes before any aggregation 
      or transformation.
    columns:
      - name: id
        description: Unique identifier for the ethnicity record.
        tests:
          - unique
          - not_null

  - name: stg_workday__military_service_base
    description: >
      Base staging model for military service records. Handles multi-source union via 
      fivetran_utils.union_data. Contains raw service branch, rank, and discharge 
      information before standardization.
    columns:
      - name: personal_info_common_id
        description: Foreign key to personal information common data.
        tests:
          - unique
          - not_null
