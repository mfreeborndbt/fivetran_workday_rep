version: 2

models:
  - name: stg_workday__worker_base
    description: Base staging model for worker history data from the Workday source. This model unions data if multiple sources are configured.
    columns:
      - name: id
        description: Unique identifier for the worker record.
        tests:
          - unique
          - not_null

  - name: stg_workday__worker_position_base
    description: Base staging model for worker position history data from the Workday source. Contains raw position assignments.
    columns:
      - name: position_id
        description: Unique identifier for the position.
        tests:
          - not_null
      - name: worker_id
        description: Foreign key to the worker.
        tests:
          - not_null
    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - position_id
              - worker_id

  - name: stg_workday__personal_information_common_data_base
    description: Base staging model for common personal information data. Contains nationality, birth information, and citizenship details.
    columns:
      - name: fivetran_id
        description: Fivetran composite key identifier.
        tests:
          - unique
          - not_null

  - name: stg_workday__country_personal_information_base
    description: Base staging model for country-specific personal information. Contains gender, marital status, and country-specific fields.
    columns:
      - name: fivetran_id
        description: Fivetran composite key identifier.
        tests:
          - unique
          - not_null

  - name: stg_workday__person_name_base
    description: Base staging model for person name data. Contains first name, last name, and various name components.
    columns:
      - name: personal_info_system_id
        description: The worker ID this name belongs to.
        tests:
          - not_null
      - name: index
        description: Index for multiple name records per person.
      - name: type
        description: The type of name (preferred, legal, etc.).
    tests:
      - dbt_utils.unique_combination_of_columns:
          arguments:
            combination_of_columns:
              - personal_info_system_id
              - index
              - type

  - name: stg_workday__person_contact_email_address_base
    description: Base staging model for person contact email addresses. Contains work and personal email addresses.
    columns:
      - name: id
        description: Unique identifier for the email record.
        tests:
          - unique
          - not_null

  - name: stg_workday__personal_information_ethnicity_base
    description: Base staging model for personal ethnicity information. Contains ethnicity codes for workers.
    columns:
      - name: id
        description: Unique identifier for the ethnicity record.
        tests:
          - unique
          - not_null

  - name: stg_workday__military_service_base
    description: Base staging model for military service records. Contains service branch, rank, and discharge information.
    columns:
      - name: personal_info_common_id
        description: Foreign key to personal information common data.
        tests:
          - unique
          - not_null
